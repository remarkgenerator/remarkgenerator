<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶® ‡¶∏‡¶®‡¶¶ ‚Äî Auto PDF & Telegram Integration</title>

  <!-- Bengali Font: Noto Sans Bengali -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet" />

  <!-- html2pdf.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    body {
      font-family: "Noto Sans Bengali", Arial, sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 20px;
      color: #222;
      line-height: 1.4;
      font-size: 15px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      padding: 25px 30px 30px;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.07);
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header img {
      max-height: 70px;
      margin-bottom: 8px;
    }
    h1 {
      margin: 6px 0 6px;
      font-size: 24px;
      font-weight: 700;
      color: #0b5ed7;
    }
    .small {
      color: #666;
      font-size: 13px;
      font-weight: 500;
    }
    h3 {
      margin-top: 25px;
      margin-bottom: 10px;
      font-weight: 700;
      color: #0b5ed7;
      border-bottom: 2px solid #0b5ed7;
      padding-bottom: 4px;
      font-size: 18px;
    }
    .row {
      margin-bottom: 14px;
    }
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 15px;
    }
    input[type=text], textarea, select {
      width: 100%;
      padding: 10px 12px;
      border: 1.8px solid #cbd5e1;
      border-radius: 6px;
      font-size: 15px;
      font-family: "Noto Sans Bengali", Arial, sans-serif;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }
    input[type=text]:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #0b5ed7;
      box-shadow: 0 0 8px rgba(11, 94, 215, 0.3);
    }
    button, .btn {
      background: #0b5ed7;
      color: #fff;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      font-size: 15px;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    button:hover, .btn:hover {
      background-color: #084abf;
    }
    #heirsTable {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0 14px;
      font-size: 14px;
      table-layout: fixed;
    }
    #heirsTable th, #heirsTable td {
      border: 1.5px solid #e0e0e0;
      padding: 8px 10px;
      text-align: left;
      vertical-align: middle;
      word-wrap: break-word;
    }
    #heirsTable th {
      background-color: #f0f6ff;
      font-weight: 700;
      color: #0b5ed7;
    }
    .row-inline {
      display: flex;
      gap: 10px;
    }
    .row-inline input {
      flex: 1;
      padding: 10px 12px;
      font-size: 15px;
    }
    .removeRow {
      background: #e74c3c; /* ‡¶≤‡¶æ‡¶≤ ‡¶∞‡¶ô ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
      padding: 6px 12px;
      border-radius: 6px;
      border: none;
      color: #fff;
      cursor: pointer;
      font-weight: 700;
      font-size: 13px;
      transition: background-color 0.3s ease;
    }
    .removeRow:hover {
      background-color: #c0392b;
    }
    .muted {
      color: #666;
      font-size: 13px;
    }
    #note {
      font-size: 13px;
      color: #444;
      margin-top: 10px;
      font-style: italic;
    }
    /* Responsive */
    @media (max-width: 600px) {
      .row-inline {
        flex-direction: column;
      }
      #heirsTable th, #heirsTable td {
        font-size: 13px;
        padding: 6px 8px;
      }
      button, .btn {
        width: 100%;
      }
    }
    /* PDF Layout Styles */
    #pdfContent {
      font-family: "Noto Sans Bengali", Arial, sans-serif;
      padding: 20px;
      color: #222;
    }
    #pdfContent h1, #pdfContent h3 {
      color: #0b5ed7;
    }
    #pdfContent table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    #pdfContent table, #pdfContent th, #pdfContent td {
      border: 1px solid #333;
    }
    #pdfContent th, #pdfContent td {
      padding: 6px 8px;
      text-align: left;
    }

    /* Popup Styles */
    .popup-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 9998;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: "Noto Sans Bengali", Arial, sans-serif;
    }
    .popup-box {
      background: #fff;
      border: 2px solid #0b5ed7;
      border-radius: 10px;
      padding: 20px;
      width: 320px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      text-align: center;
      position: relative;
    }
    .popup-box h3 {
      color: #0b5ed7;
      margin-top: 0;
    }
    .popup-box button {
      margin-top: 15px;
      padding: 8px 15px;
      font-weight: 700;
      font-size: 15px;
      border-radius: 6px;
      cursor: pointer;
    }
    .btn-copy {
      background: #0b5ed7;
      color: #fff;
      border: none;
      margin-right: 10px;
    }
    .btn-close {
      background: #e74c3c;
      color: #fff;
      border: none;
    }
    .popup-box input[type="text"] {
      width: 90%;
      padding: 8px;
      font-size: 16px;
      margin-top: 10px;
      border: 1.8px solid #cbd5e1;
      border-radius: 6px;
      box-sizing: border-box;
    }
    .error-msg {
      color: #e74c3c;
      font-weight: 700;
      margin-top: 10px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img id="logo" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <h1>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶® ‡¶∏‡¶®‡¶¶ ‡¶´‡¶∞‡ßç‡¶Æ</h1>
      <p class="small">‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá Submit ‡¶¶‡¶ø‡¶≤‡ßá ‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá‡•§</p>
    </header>

    <main id="main-area">
      <form id="warishForm" autocomplete="off">
        <div class="row">
          <label for="formName">‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶æ‡¶Æ</label>
          <input id="formName" name="formName" type="text" required placeholder="‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶ú‡ßá‡¶≤‡¶æ ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßå‡¶∞‡¶∏‡¶≠‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
        </div>
        <div class="row">
          <label for="formNumber">‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
          <input id="formNumber" name="formNumber" type="text" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡ßß‡ß®‡ß©‡ß™‡ß´‡ß¨" />
        </div>

        <h3>‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
        <div class="row">
          <label for="deceasedName">‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
          <input id="deceasedName" name="deceasedName" type="text" required placeholder="‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ" />
        </div>
        <div class="row">
          <label for="fatherName">‡¶™‡¶ø‡¶§‡¶æ/‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ</label>
          <input id="fatherName" name="fatherName" type="text" required placeholder="‡¶™‡¶ø‡¶§‡¶æ ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ" />
        </div>
        <div class="row">
          <label for="mohalla">‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ</label>
          <input id="mohalla" name="mohalla" type="text" required placeholder="‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" />
        </div>
        <div class="row">
          <label for="ward">‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Ç</label>
          <input id="ward" name="ward" type="text" required placeholder="‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞" />
        </div>
        <div class="row">
          <label for="postOffice">‡¶°‡¶æ‡¶ï‡¶ò‡¶∞</label>
          <input id="postOffice" name="postOffice" type="text" required placeholder="‡¶°‡¶æ‡¶ï‡¶ò‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" />
        </div>
        <div class="row">
          <label for="thana">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶•‡¶æ‡¶®‡¶æ</label>
          <input id="thana" name="thana" type="text" required placeholder="‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶¨‡¶æ ‡¶•‡¶æ‡¶®‡¶æ" />
        </div>
        <div class="row">
          <label for="district">‡¶ú‡ßá‡¶≤‡¶æ</label>
          <input id="district" name="district" type="text" required placeholder="‡¶ú‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" />
        </div>

        <h3>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
        <table id="heirsTable" aria-label="‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ">
          <thead>
            <tr>
              <th style="width: 5%;">‡¶ï‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï</th>
              <th style="width: 30%;">‡¶®‡¶æ‡¶Æ</th>
              <th style="width: 15%;">‡¶¨‡¶Ø‡¶º‡¶∏</th>
              <th style="width: 25%;">‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï</th>
              <th style="width: 20%;">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</th>
              <th style="width: 5%;">#</th>
            </tr>
          </thead>
          <tbody id="heirsBody">
            <tr>
              <td class="serial">‡ßß</td>
              <td><input type="text" name="heirName[]" required placeholder="‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" /></td>
              <td><input type="text" name="age[]" required placeholder="‡¶¨‡¶Ø‡¶º‡¶∏" /></td>
              <td><input type="text" name="relation[]" required placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï" /></td>
              <td><input type="text" name="comment[]" placeholder="‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø" /></td>
              <td><button type="button" class="removeRow" aria-label="‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®">&times;</button></td>
            </tr>
          </tbody>
        </table>
        <button type="button" id="addHeir" class="btn" aria-label="‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®">+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>

        <div class="row" style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
          <button type="submit" class="btn" aria-label="‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®" style="flex: 1 1 200px;">‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
          <button type="button" id="sendTelegramBtn" class="btn" aria-label="‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®" style="flex: 1 1 200px;">‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
          <button type="button" id="contactTelegramBtn" class="btn" aria-label="‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®" style="flex: 1 1 200px;">‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
      </form>
    </main>
  </div>

  <!-- Popup Container -->
  <div id="popupContainer"></div>

  <script>
    // ‡¶ï‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function updateSerialNumbers() {
      const rows = document.querySelectorAll('#heirsBody tr');
      rows.forEach((row, index) => {
        const serialCell = row.querySelector('.serial');
        if (serialCell) {
          serialCell.textContent = toBanglaNumber(index + 1);
        }
      });
    }

    // ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function toBanglaNumber(num) {
      const bnDigits = ['‡ß¶','‡ßß','‡ß®','‡ß©','‡ß™','‡ß´','‡ß¨','‡ß≠','‡ßÆ','‡ßØ'];
      return num.toString().split('').map(d => bnDigits[+d] || d).join('');
    }

    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
    document.getElementById('addHeir').addEventListener('click', () => {
      const tbody = document.getElementById('heirsBody');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td class="serial"></td>
        <td><input type="text" name="heirName[]" required placeholder="‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" /></td>
        <td><input type="text" name="age[]" required placeholder="‡¶¨‡¶Ø‡¶º‡¶∏" /></td>
        <td><input type="text" name="relation[]" required placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï" /></td>
        <td><input type="text" name="comment[]" placeholder="‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø" /></td>
        <td><button type="button" class="removeRow" aria-label="‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®">&times;</button></td>
      `;
      tbody.appendChild(tr);
      updateSerialNumbers();
    });

    // ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶æ‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶°‡ßá‡¶≤‡¶ø‡¶ó‡ßá‡¶∂‡¶®
    document.getElementById('heirsBody').addEventListener('click', (e) => {
      if (e.target.classList.contains('removeRow')) {
        const tbody = document.getElementById('heirsBody');
        if (tbody.rows.length > 1) {
          e.target.closest('tr').remove();
          updateSerialNumbers();
        } else {
          alert('‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§');
        }
      }
    });

    // PDF ‡¶§‡ßà‡¶∞‡¶ø ‡¶ì ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°
    document.getElementById('warishForm').addEventListener('submit', (e) => {
      e.preventDefault();

      // ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π
      const formName = document.getElementById('formName').value;
      const formNumber = document.getElementById('formNumber').value;
      const deceasedName = document.getElementById('deceasedName').value;
      const fatherName = document.getElementById('fatherName').value;
      const mohalla = document.getElementById('mohalla').value;
      const ward = document.getElementById('ward').value;
      const postOffice = document.getElementById('postOffice').value;
      const thana = document.getElementById('thana').value;
      const district = document.getElementById('district').value;

      const heirNames = document.getElementsByName('heirName[]');
      const ages = document.getElementsByName('age[]');
      const relations = document.getElementsByName('relation[]');
      const comments = document.getElementsByName('comment[]');

      const heirs = [];
      for(let i=0; i<heirNames.length; i++) {
        heirs.push({
          name: heirNames[i].value.trim(),
          age: ages[i].value.trim(),
          relation: relations[i].value.trim(),
          comment: comments[i].value.trim() || '-',
        });
      }

      // PDF HTML Content
      let html = `
        <h1>${formName}</h1>
        ${formNumber ? `<p><strong>‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</strong> ${formNumber}</p>` : ''}
        <h3>‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
        <p><strong>‡¶®‡¶æ‡¶Æ:</strong> ${deceasedName}</p>
        <p><strong>‡¶™‡¶ø‡¶§‡¶æ/‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ:</strong> ${fatherName}</p>
        <p><strong>‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ:</strong> ${mohalla}</p>
        <p><strong>‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Ç:</strong> ${ward}</p>
        <p><strong>‡¶°‡¶æ‡¶ï‡¶ò‡¶∞:</strong> ${postOffice}</p>
        <p><strong>‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶•‡¶æ‡¶®‡¶æ:</strong> ${thana}</p>
        <p><strong>‡¶ú‡ßá‡¶≤‡¶æ:</strong> ${district}</p>

        <h3>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
        <table>
          <thead>
            <tr>
              <th>‡¶ï‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï</th>
              <th>‡¶®‡¶æ‡¶Æ</th>
              <th>‡¶¨‡¶Ø‡¶º‡¶∏</th>
              <th>‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï</th>
              <th>‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø</th>
            </tr>
          </thead>
          <tbody>
      `;

      heirs.forEach((h, i) => {
        html += `
          <tr>
            <td>${toBanglaNumber(i+1)}</td>
            <td>${h.name}</td>
            <td>${h.age}</td>
            <td>${h.relation}</td>
            <td>${h.comment}</td>
          </tr>
        `;
      });

      html += `
          </tbody>
        </table>
        <p style="margin-top: 30px;">‡¶è‡¶á ‡¶∏‡¶®‡¶¶‡¶ü‡¶ø ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
      `;

      const pdfContent = document.createElement('div');
      pdfContent.id = 'pdfContent';
      pdfContent.innerHTML = html;

      const opt = {
        margin:       0.5,
        filename:     'warish_sondho.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(pdfContent).save();
    });

    // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ (10 ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶è‡¶≤‡¶´‡¶æ‡¶®‡¶ø‡¶â‡¶Æ‡ßá‡¶∞‡¶ø‡¶ï)
    function generateReferenceCode() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < 10; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    // Popup ‡¶§‡ßà‡¶∞‡¶ø ‡¶ì ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function showPopup(contentHtml) {
      // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶ó‡ßá‡¶∞ popup ‡¶•‡ßá‡¶ï‡ßá ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßã
      const container = document.getElementById('popupContainer');
      container.innerHTML = '';

      const overlay = document.createElement('div');
      overlay.className = 'popup-overlay';

      const box = document.createElement('div');
      box.className = 'popup-box';
      box.innerHTML = contentHtml;

      overlay.appendChild(box);
      container.appendChild(overlay);

      // ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶¨‡¶æ‡¶ü‡¶® ‡¶¨‡¶æ ‡¶ï‡¶™‡¶ø ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶ø
      const btnClose = box.querySelector('.btn-close');
      if (btnClose) {
        btnClose.addEventListener('click', () => {
          container.innerHTML = '';
        });
      }
      const btnCopy = box.querySelector('.btn-copy');
      if (btnCopy) {
        btnCopy.addEventListener('click', () => {
          const refInput = box.querySelector('#refCodeInput');
          if (refInput) {
            refInput.select();
            refInput.setSelectionRange(0, 99999); // ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
            navigator.clipboard.writeText(refInput.value).then(() => {
              alert('‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            });
          }
        });
      }
    }

    // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
    document.getElementById('sendTelegramBtn').addEventListener('click', () => {
      // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶¨
      const form = document.getElementById('warishForm');
      if (!form.checkValidity()) {
        alert('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶§‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        form.reportValidity();
        return;
      }

      // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü
      const refCode = generateReferenceCode();

      // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π
      const formName = document.getElementById('formName').value;
      const formNumber = document.getElementById('formNumber').value;
      const deceasedName = document.getElementById('deceasedName').value;
      const fatherName = document.getElementById('fatherName').value;
      const mohalla = document.getElementById('mohalla').value;
      const ward = document.getElementById('ward').value;
      const postOffice = document.getElementById('postOffice').value;
      const thana = document.getElementById('thana').value;
      const district = document.getElementById('district').value;

      const heirNames = document.getElementsByName('heirName[]');
      const ages = document.getElementsByName('age[]');
      const relations = document.getElementsByName('relation[]');
      const comments = document.getElementsByName('comment[]');

      let heirsText = '';
      for (let i = 0; i < heirNames.length; i++) {
        heirsText += `${toBanglaNumber(i+1)}. ‡¶®‡¶æ‡¶Æ: ${heirNames[i].value.trim()}, ‡¶¨‡¶Ø‡¶º‡¶∏: ${ages[i].value.trim()}, ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï: ${relations[i].value.trim()}, ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø: ${comments[i].value.trim() || '-'}\n`;
      }

      // Telegram Bot Token ‡¶è‡¶¨‡¶Ç Chat ID (‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡¶∏‡¶æ‡¶ì)
      const telegramBotToken = 'YOUR_TELEGRAM_BOT_TOKEN_HERE';
      const telegramChatId = 'YOUR_TELEGRAM_CHAT_ID_HERE';

      // Telegram message text
      const messageText = `
üìù *‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶® ‡¶∏‡¶®‡¶¶ ‡¶§‡¶•‡ßç‡¶Ø*  
*‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶°:* \`${refCode}\`  
*‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶æ‡¶Æ:* ${formName}  
*‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:* ${formNumber || '-'}  
*‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ:* ${deceasedName}  
*‡¶™‡¶ø‡¶§‡¶æ/‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ:* ${fatherName}  
*‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:* ‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ: ${mohalla}, ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°: ${ward}, ‡¶°‡¶æ‡¶ï‡¶ò‡¶∞: ${postOffice}, ‡¶•‡¶æ‡¶®‡¶æ: ${thana}, ‡¶ú‡ßá‡¶≤‡¶æ: ${district}

*‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ:*  
${heirsText}
      `;

      // Telegram API URL (URL encode message)
      const telegramUrl = `https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&parse_mode=Markdown&text=${encodeURIComponent(messageText)}`;

      // Telegram API ‡¶ï‡¶≤ (fetch)
      fetch(telegramUrl)
        .then(response => response.json())
        .then(data => {
          if (data.ok) {
            // ‡¶∏‡¶´‡¶≤ ‡¶π‡¶≤‡ßá popup ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶∏‡¶π
            showPopup(`
              <h3>‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!</h3>
              <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã‡•§ ‡¶è‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
              <input type="text" id="refCodeInput" readonly value="${refCode}" />
              <button class="btn-copy">‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
              <button class="btn-close">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            `);
          } else {
            alert('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
          }
        })
        .catch(() => {
          alert('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        });
    });

    // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
    document.getElementById('contactTelegramBtn').addEventListener('click', () => {
      // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∏‡¶π popup ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
      showPopup(`
        <h3>‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
        <p>‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®:</p>
        <input type="text" id="refInput" placeholder="‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" />
        <p class="error-msg" id="refError">‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶≠‡ßÅ‡¶≤‡•§ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®‡•§</p>
        <button id="btnVerifyRef" class="btn" style="margin-top:10px;">‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <button class="btn-close" style="margin-top:10px;">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      `);

      // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
      const container = document.getElementById('popupContainer');
      const btnVerify = container.querySelector('#btnVerifyRef');
      const inputRef = container.querySelector('#refInput');
      const errorMsg = container.querySelector('#refError');

      btnVerify.addEventListener('click', () => {
        const enteredRef = inputRef.value.trim().toUpperCase();
        if (!enteredRef) {
          errorMsg.style.display = 'block';
          errorMsg.textContent = '‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®‡•§';
          return;
        }

        // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá
        // ‡¶è‡¶á ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶õ‡¶ø
        // ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶á‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá
        // ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶∏‡¶π‡¶ú ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡¶ø:

        // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤‡¶ø ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ refCode ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á (‡¶è‡¶á ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡ßá ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤)
        if (enteredRef === window.lastGeneratedRefCode) {
          errorMsg.style.display = 'none';
          // ‡¶ï‡ßç‡¶≤‡ßã‡¶ú popup
          container.innerHTML = '';
          // ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ (‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶π‡¶¨‡ßá)
          const telegramUser = 'YOUR_TELEGRAM_USERNAME_HERE'; // @‡¶∏‡¶π ‡¶≤‡¶ø‡¶ñ‡¶¨‡ßá ‡¶®‡¶æ
          // ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø
          const telegramLink = `https://t.me/${telegramUser}`;
          // ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ì‡¶™‡ßá‡¶®
          window.open(telegramLink, '_blank');
        } else {
          errorMsg.style.display = 'block';
          errorMsg.textContent = '‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶≠‡ßÅ‡¶≤‡•§ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®‡•§';
        }
      });
    });

    // ‡¶∏‡¶æ‡¶á‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶ï‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
    updateSerialNumbers();

    // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
    window.lastGeneratedRefCode = '';

    // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶¨‡ßá
    function generateReferenceCode() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < 10; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      window.lastGeneratedRefCode = result; // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶è ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶¨‡ßá
      return result;
    }
  </script>
</body>
</html>
