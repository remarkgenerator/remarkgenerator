<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶® ‡¶∏‡¶®‡¶¶ ‚Äî Auto PDF</title>

  <!-- Bengali Font: Noto Sans Bengali from Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali&display=swap" rel="stylesheet" />

  <!-- html2pdf.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    body {
      font-family: "Noto Sans Bengali", Arial, sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 20px;
      color: #222;
      line-height: 1.4;
      font-size: 15px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      padding: 25px 30px 30px;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.07);
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header img {
      max-height: 70px;
      margin-bottom: 8px;
    }
    h1 {
      margin: 6px 0 6px;
      font-size: 24px;
      font-weight: 700;
      color: #0b5ed7;
    }
    .small {
      color: #666;
      font-size: 13px;
      font-weight: 500;
    }
    h3 {
      margin-top: 25px;
      margin-bottom: 10px;
      font-weight: 700;
      color: #0b5ed7;
      border-bottom: 2px solid #0b5ed7;
      padding-bottom: 4px;
      font-size: 18px;
    }
    .row {
      margin-bottom: 14px;
    }
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 15px;
    }
    input[type=text], textarea, select {
      width: 100%;
      padding: 10px 12px;
      border: 1.8px solid #cbd5e1;
      border-radius: 6px;
      font-size: 15px;
      font-family: "Noto Sans Bengali", Arial, sans-serif;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }
    input[type=text]:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #0b5ed7;
      box-shadow: 0 0 8px rgba(11, 94, 215, 0.3);
    }
    button, .btn {
      background: #0b5ed7;
      color: #fff;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      font-size: 15px;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    button:hover, .btn:hover {
      background-color: #084abf;
    }
    #heirsTable {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0 14px;
      font-size: 14px;
      table-layout: fixed;
    }
    #heirsTable th, #heirsTable td {
      border: 1.5px solid #e0e0e0;
      padding: 8px 10px;
      text-align: left;
      vertical-align: middle;
      word-wrap: break-word;
    }
    #heirsTable th {
      background-color: #f0f6ff;
      font-weight: 700;
      color: #0b5ed7;
      text-align: center;
      width: 5%;
    }
    .row-inline {
      display: flex;
      gap: 10px;
    }
    .row-inline input {
      flex: 1;
      padding: 10px 12px;
      font-size: 15px;
    }
    .removeRow {
      background: #e74c3c;
      padding: 6px 12px;
      border-radius: 6px;
      border: none;
      color: #fff;
      cursor: pointer;
      font-weight: 700;
      font-size: 13px;
      transition: background-color 0.3s ease;
    }
    .removeRow:hover {
      background-color: #c0392b;
    }
    .muted {
      color: #666;
      font-size: 13px;
    }
    #note {
      font-size: 13px;
      color: #444;
      margin-top: 10px;
      font-style: italic;
    }
    /* Responsive for smaller screens */
    @media (max-width: 600px) {
      .row-inline {
        flex-direction: column;
      }
      #heirsTable th, #heirsTable td {
        font-size: 13px;
        padding: 6px 8px;
      }
      button, .btn {
        width: 100%;
      }
    }
    /* PDF Layout Styles */
    #pdfContent {
      font-family: "Noto Sans Bengali", Arial, sans-serif;
      padding: 20px;
      color: #222;
    }
    #pdfContent h1, #pdfContent h3 {
      color: #0b5ed7;
    }
    #pdfContent table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    #pdfContent table, #pdfContent th, #pdfContent td {
      border: 1px solid #333;
    }
    #pdfContent th, #pdfContent td {
      padding: 6px 8px;
      text-align: left;
    }

    /* New Button Container */
    #actionButtons {
      margin-top: 20px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    #actionButtons button {
      flex: 1;
      min-width: 150px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img id="logo" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <h1>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶® ‡¶∏‡¶®‡¶¶ ‡¶´‡¶∞‡ßç‡¶Æ</h1>
      <p class="small">‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </header>

    <main id="main-area">
      <form id="warishForm" autocomplete="off">
        <div class="row">
          <label for="formName">‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶æ‡¶Æ</label>
          <input id="formName" name="formName" type="text" required placeholder="‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶ú‡ßá‡¶≤‡¶æ ‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßå‡¶∞‡¶∏‡¶≠‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
        </div>
        <div class="row">
          <label for="formNumber">‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
          <input id="formNumber" name="formNumber" type="text" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡ßß‡ß®‡ß©‡ß™‡ß´‡ß¨">
        </div>

        <h3>‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
        <div class="row">
          <label for="deceasedName">‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
          <input id="deceasedName" name="deceasedName" type="text" required placeholder="‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ">
        </div>
        <div class="row">
          <label for="fatherName">‡¶™‡¶ø‡¶§‡¶æ/‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ</label>
          <input id="fatherName" name="fatherName" type="text" required placeholder="‡¶™‡¶ø‡¶§‡¶æ ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ">
        </div>
        <div class="row">
          <label for="mohalla">‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ</label>
          <input id="mohalla" name="mohalla" type="text" required placeholder="‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
        </div>
        <div class="row">
          <label for="ward">‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Ç</label>
          <input id="ward" name="ward" type="text" required placeholder="‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
        </div>
        <div class="row">
          <label for="postOffice">‡¶°‡¶æ‡¶ï‡¶ò‡¶∞</label>
          <input id="postOffice" name="postOffice" type="text" required placeholder="‡¶°‡¶æ‡¶ï‡¶ò‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ">
        </div>
        <div class="row">
          <label for="thana">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶•‡¶æ‡¶®‡¶æ</label>
          <input id="thana" name="thana" type="text" required placeholder="‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ ‡¶¨‡¶æ ‡¶•‡¶æ‡¶®‡¶æ">
        </div>
        <div class="row">
          <label for="district">‡¶ú‡ßá‡¶≤‡¶æ</label>
          <input id="district" name="district" type="text" required placeholder="‡¶ú‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
        </div>

        <h3>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
        <table id="heirsTable" aria-label="‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ">
          <thead>
            <tr>
              <th>#</th>
              <th style="width: 30%;">‡¶®‡¶æ‡¶Æ</th>
              <th style="width: 15%;">‡¶¨‡¶Ø‡¶º‡¶∏</th>
              <th style="width: 25%;">‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï</th>
              <th style="width: 25%;">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</th>
              <th style="width: 5%;"></th>
            </tr>
          </thead>
          <tbody id="heirsBody">
            <tr>
              <td class="serialNo" style="text-align:center;">1</td>
              <td><input type="text" name="heirName[]" required placeholder="‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"></td>
              <td><input type="text" name="age[]" required placeholder="‡¶¨‡¶Ø‡¶º‡¶∏"></td>
              <td><input type="text" name="relation[]" required placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï"></td>
              <td><input type="text" name="comment[]" placeholder="‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø"></td>
              <td><button type="button" class="removeRow" aria-label="‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®">&times;</button></td>
            </tr>
          </tbody>
        </table>
        <div id="actionButtons">
          <button type="button" id="addHeir" class="btn" aria-label="‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®">+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
          <button type="submit" class="btn" aria-label="‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®" id="generatePdfBtn">‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
          <button type="button" class="btn" aria-label="‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®" id="sendTelegramBtn" style="background:#009688;">‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶™‡ßá‡¶§‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
      </form>
    </main>
  </div>

  <script>
    // Telegram Bot Token ‡¶è‡¶¨‡¶Ç User ID (‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡¶∏‡¶æ‡¶§‡ßá ‡¶π‡¶¨‡ßá)
    const TELEGRAM_BOT_TOKEN = '8289822977:AAHXfya0wathSqLG2x1Xsrv-nR4ECZFhrZ0';
    const TELEGRAM_USER_ID = '8402648058';

    // ‡¶ï‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function updateSerialNumbers() {
      const serialCells = document.querySelectorAll('#heirsBody .serialNo');
      serialCells.forEach((cell, idx) => {
        cell.textContent = idx + 1;
      });
    }

    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂ ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
    document.getElementById('addHeir').addEventListener('click', () => {
      const tbody = document.getElementById('heirsBody');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td class="serialNo" style="text-align:center;"></td>
        <td><input type="text" name="heirName[]" required placeholder="‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"></td>
        <td><input type="text" name="age[]" required placeholder="‡¶¨‡¶Ø‡¶º‡¶∏"></td>
        <td><input type="text" name="relation[]" required placeholder="‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï"></td>
        <td><input type="text" name="comment[]" placeholder="‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø"></td>
        <td><button type="button" class="removeRow" aria-label="‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®">&times;</button></td>
      `;
      tbody.appendChild(tr);
      updateSerialNumbers();
    });

    // ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶æ‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶°‡ßá‡¶≤‡¶ø‡¶ó‡ßá‡¶∂‡¶®
    document.getElementById('heirsBody').addEventListener('click', (e) => {
      if (e.target.classList.contains('removeRow')) {
        const tbody = document.getElementById('heirsBody');
        if(tbody.rows.length > 1) {
          e.target.closest('tr').remove();
          updateSerialNumbers();
        } else {
          alert('‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§');
        }
      }
    });

    // PDF ‡¶§‡ßà‡¶∞‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function generatePDF() {
      // ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡¶ø‡¶Ø‡¶º‡ßá PDF ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® div ‡¶§‡ßà‡¶∞‡¶ø
      const pdfContent = document.createElement('div');
      pdfContent.id = 'pdfContent';

      // ‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶∞ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡¶æ‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ü‡¶∏‡¶æ
      const formName = document.getElementById('formName').value;
      const formNumber = document.getElementById('formNumber').value;
      const deceasedName = document.getElementById('deceasedName').value;
      const fatherName = document.getElementById('fatherName').value;
      const mohalla = document.getElementById('mohalla').value;
      const ward = document.getElementById('ward').value;
      const postOffice = document.getElementById('postOffice').value;
      const thana = document.getElementById('thana').value;
      const district = document.getElementById('district').value;

      // ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ
      const heirs = [];
      const heirNames = document.getElementsByName('heirName[]');
      const ages = document.getElementsByName('age[]');
      const relations = document.getElementsByName('relation[]');
      const comments = document.getElementsByName('comment[]');

      for(let i=0; i<heirNames.length; i++) {
        heirs.push({
          name: heirNames[i].value.trim(),
          age: ages[i].value.trim(),
          relation: relations[i].value.trim(),
          comment: comments[i].value.trim(),
        });
      }

      // PDF ‡¶è‡¶∞ HTML content ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã
      let html = `
        <h1>${formName}</h1>
        ${formNumber ? `<p><strong>‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</strong> ${formNumber}</p>` : ''}
        <h3>‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
        <p><strong>‡¶®‡¶æ‡¶Æ:</strong> ${deceasedName}</p>
        <p><strong>‡¶™‡¶ø‡¶§‡¶æ/‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ:</strong> ${fatherName}</p>
        <p><strong>‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ:</strong> ${mohalla}</p>
        <p><strong>‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Ç:</strong> ${ward}</p>
        <p><strong>‡¶°‡¶æ‡¶ï‡¶ò‡¶∞:</strong> ${postOffice}</p>
        <p><strong>‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶•‡¶æ‡¶®‡¶æ:</strong> ${thana}</p>
        <p><strong>‡¶ú‡ßá‡¶≤‡¶æ:</strong> ${district}</p>

        <h3>‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
        <table border="1" cellpadding="6" cellspacing="0" style="border-collapse: collapse; width: 100%; margin-top: 10px; margin-bottom: 20px;">
          <thead>
            <tr>
              <th style="width: 5%; text-align:center;">#</th>
              <th style="width: 30%;">‡¶®‡¶æ‡¶Æ</th>
              <th style="width: 15%;">‡¶¨‡¶Ø‡¶º‡¶∏</th>
              <th style="width: 25%;">‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï</th>
              <th style="width: 25%;">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø</th>
            </tr>
          </thead>
          <tbody>
      `;

      heirs.forEach((h, idx) => {
        html += `
          <tr>
            <td style="text-align:center;">${idx + 1}</td>
            <td>${h.name}</td>
            <td>${h.age}</td>
            <td>${h.relation}</td>
            <td>${h.comment || '-'}</td>
          </tr>
        `;
      });

      html += `
          </tbody>
        </table>
        <p style="margin-top: 30px;">‡¶è‡¶á ‡¶∏‡¶®‡¶¶‡¶ü‡¶ø ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
      `;

      pdfContent.innerHTML = html;

      // PDF ‡¶§‡ßà‡¶∞‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
      const opt = {
        margin:       0.5,
        filename:     'warish_sondho.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
      };

      return html2pdf().set(opt).from(pdfContent);
    }

    // PDF ‡¶§‡ßà‡¶∞‡¶ø ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
    document.getElementById('warishForm').addEventListener('submit', (e) => {
      e.preventDefault();
      generatePDF().save();
    });

    // Telegram-‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    async function sendDataToTelegram() {
      // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π
      const formName = document.getElementById('formName').value;
      const formNumber = document.getElementById('formNumber').value;
      const deceasedName = document.getElementById('deceasedName').value;
      const fatherName = document.getElementById('fatherName').value;
      const mohalla = document.getElementById('mohalla').value;
      const ward = document.getElementById('ward').value;
      const postOffice = document.getElementById('postOffice').value;
      const thana = document.getElementById('thana').value;
      const district = document.getElementById('district').value;

      const heirNames = document.getElementsByName('heirName[]');
      const ages = document.getElementsByName('age[]');
      const relations = document.getElementsByName('relation[]');
      const comments = document.getElementsByName('comment[]');

      // ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ó‡¶†‡¶®
      let heirsText = '';
      for(let i=0; i<heirNames.length; i++) {
        heirsText += `\n${i+1}. ‡¶®‡¶æ‡¶Æ: ${heirNames[i].value.trim()}, ‡¶¨‡¶Ø‡¶º‡¶∏: ${ages[i].value.trim()}, ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï: ${relations[i].value.trim()}, ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø: ${comments[i].value.trim() || '-'}`
      }

      // Telegram ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¨‡¶æ‡¶®‡¶æ‡¶®‡ßã
      const message = `
üìù ‡¶®‡¶§‡ßÅ‡¶® ‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶® ‡¶∏‡¶®‡¶¶ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§

‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶æ‡¶Æ: ${formName}
${formNumber ? `‡¶´‡¶∞‡ßç‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞: ${formNumber}` : ''}
‡¶Æ‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ: ${deceasedName}
‡¶™‡¶ø‡¶§‡¶æ/‡¶∏‡ßç‡¶¨‡¶æ‡¶Æ‡ßÄ: ${fatherName}
‡¶Æ‡¶π‡¶≤‡ßç‡¶≤‡¶æ: ${mohalla}
‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶Ç: ${ward}
‡¶°‡¶æ‡¶ï‡¶ò‡¶∞: ${postOffice}
‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ/‡¶•‡¶æ‡¶®‡¶æ: ${thana}
‡¶ú‡ßá‡¶≤‡¶æ: ${district}

‡¶ì‡ßü‡¶æ‡¶∞‡¶ø‡¶∂‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ:
${heirsText}

---------------------
[Auto Generated Message]
      `;

      // Telegram Bot API URL
      const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;

      // API ‡¶ï‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø POST data
      const data = {
        chat_id: TELEGRAM_USER_ID,
        text: message,
        parse_mode: 'HTML'
      };

      try {
        const response = await fetch(url, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(data)
        });

        if (response.ok) {
          alert('‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§\n‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶™‡ßá‡¶§‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
          // ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá PDF ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶®‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã
        } else {
          alert('‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
          console.error('Telegram API response:', await response.text());
        }
      } catch (error) {
        alert('‡¶ï‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        console.error('Fetch error:', error);
      }
    }

    // Telegram ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
    document.getElementById('sendTelegramBtn').addEventListener('click', () => {
      // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶ö‡ßá‡¶ï
      const form = document.getElementById('warishForm');
      if (!form.checkValidity()) {
        alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        return;
      }
      // ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤
      sendDataToTelegram();
    });

    // ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü Serial Number ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
    updateSerialNumbers();
  </script>
</body>
          </html>
