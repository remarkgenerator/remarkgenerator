<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8">
<title>ওয়ারিশন সনদ — Auto PDF</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body { font-family: "Noto Sans Bengali", Arial, sans-serif; }
</style>
</head>
<body>

<form id="warishForm">
  <label>মৃত ব্যক্তির নাম</label>
  <input name="deceasedName" required><br>
  <label>পিতা/স্বামী</label>
  <input name="fatherName" required><br>
  <button type="submit">PDF বানাও</button>
</form>

<script>
// ===== Base64 ফন্ট (সংক্ষেপিত উদাহরণ, আসলটা বড় হবে) =====
const notoBengaliBase64 = "AAEAAAALAIAAAwAwT1Mv..."; // এখানে আসল Base64 বসবে

function bnNumber(num) {
  return String(num).replace(/\d/g, d=>"০১২৩৪৫৬৭৮৯"[d]);
}
function bnDate() {
  const d=new Date();
  return `${bnNumber(d.getDate())}/${bnNumber(d.getMonth()+1)}/${bnNumber(d.getFullYear())}`;
}

async function generatePDF(data){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF('p','pt','a4');

  // ফন্ট যুক্ত করা
  doc.addFileToVFS("NotoSansBengali-Regular.ttf", notoBengaliBase64);
  doc.addFont("NotoSansBengali-Regular.ttf", "NotoSansBengali", "normal");
  doc.setFont("NotoSansBengali");

  let y = 40;
  const margin = 40;
  const pageWidth = doc.internal.pageSize.getWidth();

  doc.setFontSize(16);
  doc.text(`ওয়ারিশন সনদ`, pageWidth/2, y, {align: 'center'});
  y += 20;

  doc.setFontSize(10);
  doc.text(`তারিখ: ${bnDate()}`, margin, y);
  y += 20;

  doc.setFontSize(12);
  doc.text(`মৃত ব্যক্তির তথ্য:`, margin, y);
  y += 16;

  doc.setFontSize(10);
  doc.text(`নাম: ${data.deceasedName}`, margin, y);
  y += 14;
  doc.text(`পিতা/স্বামী: ${data.fatherName}`, margin, y);

  doc.save("warish.pdf");
}

document.getElementById('warishForm').addEventListener('submit', function(e){
  e.preventDefault();
  const fd = new FormData(this);
  const data = {};
  for (const [k,v] of fd.entries()) data[k] = v.trim();
  generatePDF(data);
});
</script>

</body>
</html>
